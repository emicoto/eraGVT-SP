;--------------------------------------------------
;戦闘開始時に呼ばれる
@SHOW_STATUS
#DIM CHISEI_CAL
#DIM CCOUNT
RESETCOLOR

;--------------------------------------------------
;ここから表示
;--------------------------------------------------
;キャラの基礎ステータス
CALL SHOW_STATUS_BASE_DISPBATTLE, TARGET
;衣装の耐久度表示
CALL CLOTH_BATTLE_DISPHP
RESETCOLOR

;戦闘支援による補正
LOCAL:0 = 0
FOR CCOUNT, 0, CHARANUM
	SIF CCOUNT == MASTER || CCOUNT > 6
		CONTINUE
	CALL CHECK_ACTION("支援",CCOUNT)
	SIF RESULT == 0
		CONTINUE
	IF CFLAG:CCOUNT:100 == 106
		CHISEI_CAL = MAXBASE:CCOUNT:知性 / 4
		;衣装による補正
		CALL CLOTH_BATTLE_HOSEI, "CHISEI", CCOUNT
		CHISEI_CAL = CHISEI_CAL * RESULT / 100
		;インカム
		SIF CFLAG:CCOUNT:43 == 511
			CHISEI_CAL = CHISEI_CAL * 110 / 100 + 5
		;支援者が献身的
		SIF TALENT:CCOUNT:献身的 > 0
			CHISEI_CAL = CHISEI_CAL * 110 / 100 + 5
		;対象者が自分勝手
		SIF TALENT:TARGET:自分勝手 > 0
			CHISEI_CAL = CHISEI_CAL * 25 / 100
		LOCAL:0 += CHISEI_CAL
	ENDIF
NEXT
IF (TCVAR:12 & 強拘束) > 0
	CALL COM40_HANTEI
	IF RESULT:0 >= 100
		LOCAL:0 = 100
	ELSE
		LOCAL:0 = RESULT:0
	ENDIF

	PRINTFORM 　引き剥がす成功率：(  {LOCAL:0}％)
ELSEIF TCVAR:0 == 0
	CALL ACT_HANTEI_CHARA_TO_TENTACLE, "HURIHODOKU", 1
	IF RESULT:1 >= 100
		LOCAL:0 = 100
	ELSE
		LOCAL:0 = RESULT:1
	ENDIF

	PRINTFORM 　振り解く成功率：(  {LOCAL:0}％)
ELSE
	IF FLAG:110
		LOCAL:1 = MAXBASE:(FLAG:111):知性
	ELSE
		CALL TENTACLE_ACCESS, "CHISEI"
		LOCAL:1 = RESULT
	ENDIF
	LOCAL:2 = 160 * (MAXBASE:知性 + LOCAL:0) / (MAXBASE:知性 + LOCAL:0 + LOCAL:1) + 96
	LOCAL:0 = 100 * LOCAL:0 / LOCAL:1
	SIF FLAG:43
		PRINTFORM 　戦闘支援効果：(+ {LOCAL:0}％)
	PRINT 　予測精度：
	FONTBOLD
	IF LOCAL:2 >= 220
		SETCOLOR 250,250,0
		PRINT Ｓ
	ELSEIF LOCAL:2 >= 200
		SETCOLOR 250,90,0
		PRINT Ａ
	ELSEIF LOCAL:2 >= 160
		SETCOLOR 0,120,250
		PRINT Ｂ
	ELSEIF LOCAL:2 >= 120
		SETCOLOR 0,250,120
		PRINT Ｃ
	ELSEIF LOCAL:2 >= 80
		SETCOLOR 250,0,250
		PRINT Ｄ
	ELSE
		SETCOLOR 120,120,120
		PRINT Ｅ
	ENDIF
	FONTREGULAR
	RESETCOLOR
ENDIF

PRINTL 

PRINT 状態　　　
IF TALENT:オトコ > 0
	SETCOLOR 0, 180, 205
	PRINT [オトコ]
ELSE
	IF TALENT:処女 > 0
		SETCOLOR 255, 0, 255
	ELSEIF TALENT:処女 == 0
		SETCOLOR 120, 0, 120
	ELSE
		SETCOLOR 120, 120, 120
	ENDIF
	IF TALENT:処女 > 0
		PRINT [処女]
	ELSEIF TALENT:処女 == 0 || TALENT:処女 == -1
		PRINT [非処女]
	ENDIF
	SETCOLOR 255, 180, 120
	SIF TALENT:ふたなり > 0
		PRINT [ふたなり]
ENDIF
SETCOLOR 80, 80, 255
SIF CFLAG:1 == 1
	PRINT [変身]
SIF CFLAG:1 == 2
	PRINT [SP変身]

SETCOLOR 255, 128, 255
SIF TCVAR:40 > 0
	PRINT [絶頂禁止]

IF CFLAG:99 < 20
	SETCOLOR 50, 255, 90
ELSEIF CFLAG:99 < 50
	SETCOLOR 40, 146, 73
ELSE
	SETCOLOR 30, 102, 36
ENDIF
SIF CFLAG:99
	PRINTFORM [疲労 {CFLAG:99}]

SETCOLOR 75,150,250
SIF FLAG:70
	PRINTFORM [観衆 {FLAG:70}人]
SETCOLOR 150,75,250
SIF FLAG:71
	PRINTFORM [動画撮影者 {FLAG:71}人]

SETCOLOR 250,75,15
IF FLAG:45 == 1 || ((FLAG:70 + FLAG:71) > 0 && CONFIG_CHECK_EVENT_F(3) > 0)
	PRINTFORM [撤退不能]
ELSEIF TFLAG:0 < 8 && CONFIG_CHECK_EVENT_F(3) == 0 && PERCENT_CAL_F(BASE:体力, MAXBASE:体力) > 50 && PERCENT_CAL_F(BASE:気力, MAXBASE:気力) > 50 && FLAG:45 == 0
	PRINTFORM [撤退可能まで {8 - TFLAG:0}ターン]
ENDIF
IF TCVAR:12 == 0
	SETCOLOR 150,150,250
	PRINTFORM [正常]
ELSE
	SETCOLOR 250,180,50
	SIF (TCVAR:12 & 気絶)
		PRINTFORM [気絶]
	SETCOLOR 150,0,250
	SIF (TCVAR:12 & 排卵)
		PRINTFORM [排卵]
	SETCOLOR 250,0,150
	SIF (TCVAR:12 & 発情)
		PRINTFORM [発情]
	SETCOLOR 250,250,0
	SIF (TCVAR:12 & 麻痺)
		PRINTFORM [麻痺]
	SETCOLOR 0,250,150
	SIF (TCVAR:12 & べとべと)
		PRINTFORM [べとべと]
	SETCOLOR 150,0,250
	SIF (TCVAR:12 & 腰くだけ)
		PRINTFORM [腰くだけ]
	SETCOLOR 255,182,193
	SIF (TCVAR:12 & 恍惚)
		PRINTFORM [恍惚]
	SETCOLOR 200,50,50
	SIF (TCVAR:12 & 強拘束)
		PRINTFORM [強拘束]
ENDIF
IF TALENT:避妊結界 > 0 && BASE:性耐性 > 0
	SETCOLOR 200,200,80
	PRINTFORM [避妊結界]
ENDIF
RESETCOLOR
PRINTL 

;戦闘距離
PRINT 距離　　　ENEMY <<＋>>
IF TCVAR:0 == 0
	LOCAL = 0
ELSEIF TCVAR:0 == 1
	LOCAL = 3
ELSEIF TCVAR:0 == 2
	LOCAL = 9
ELSEIF TCVAR:0 == 3
	LOCAL = 15
ENDIF
IF TCVAR:0 != 0 && RAND:2 == 0
	LOCAL -= RAND:2
	LOCAL += RAND:2
ENDIF
REPEAT LOCAL
	IF COUNT % 2 == 0
		PRINT _
	ELSE
		PRINT -
	ENDIF
REND
CALL PRINT_DISTANCE
REPEAT 18 - LOCAL
	PRINT  
REND
;ジャンプ性能
PRINT 空中ダッシュ:
FONTBOLD
FONTITALIC
IF MAXBASE:空中ダッシュ > 0
	IF BASE:空中ダッシュ == 0
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ - GETBIT(TCVAR:216, 0) == 0
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 1
	IF BASE:空中ダッシュ < 2
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 1
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 2
	IF BASE:空中ダッシュ < 3
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 2
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 3
	IF BASE:空中ダッシュ < 4
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 3
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 4
	IF BASE:空中ダッシュ < 5
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 4
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 5
	IF BASE:空中ダッシュ < 6
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 5
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 6
	IF BASE:空中ダッシュ < 7
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 6
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
IF MAXBASE:空中ダッシュ > 7
	IF BASE:空中ダッシュ < 8
		SETCOLOR 128,128,128
		PRINT □
	ELSEIF BASE:空中ダッシュ -  GETBIT(TCVAR:216, 0) == 7
		SETCOLOR 255,255,0
		PRINT ■
	ELSE
		SETCOLOR 220,220,220
		PRINT ■
	ENDIF
	RESETCOLOR
ELSE
	PRINT 　
ENDIF
FONTREGULAR
;空中が狙われる確率
LOCAL = TCVAR:33
SIF TCVAR:0 == 0
	LOCAL = 0
PRINT 　空:
CALL FORECAST_OUTPUT_NUM, LOCAL
PRINT  %
PRINTL 

PRINTL 

;種族とFEATの表示
FOR LOCAL, 201, 250
	SIF TALENT:LOCAL > 0
		PRINTFORM  種族:%TALENTNAME:LOCAL%    
NEXT
PRINT FEAT:
LOCAL:1 = 0
FOR LOCAL, 1100, 1300
	SIF TALENTNAME:LOCAL == "超反応" && TFLAG:80 > 0
		SETCOLOR 128,128,128
	SIF TALENTNAME:LOCAL == "秘められし力" && PERCENT_CAL_F(BASE:体力 + BASE:気力, MAXBASE:体力 + MAXBASE:気力) > 25
		SETCOLOR 128,128,128
	IF TALENT:LOCAL > 0
		PRINTFORM [%TALENTNAME:LOCAL%]
		LOCAL:1 = 1
	ENDIF
	RESETCOLOR
NEXT
IF LOCAL:1 == 1
	PRINTL 
		;直撃率
	LOCAL:2 = 0
	;CRT率
	LOCAL:3 = 0
	;バースト攻撃の疲労度
	LOCAL:4 = 0

	;メリット効果
	PRINT    
	SETCOLOR 200,255,200
	IF TALENT:攻勢構築 > 0
		LOCAL:2 += 6
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:獣性の証 > 0
		LOCAL:3 += 6
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:秘められし力 > 0 && PERCENT_CAL_F(BASE:体力 + BASE:気力, MAXBASE:体力 + MAXBASE:気力) <= 25
		LOCAL:2 += 12
		LOCAL:3 += 12
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:心眼 > 0
		LOCAL:2 += 3
		LOCAL:3 += 3
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF LOCAL:2 > 0
		PRINT 直撃率+
		PRINTFORM {LOCAL:2}
		PRINT %  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF LOCAL:3 > 0
		PRINT CRT率+
		PRINTFORM {LOCAL:3}
		PRINT %  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:超反応 > 0 && TFLAG:80 == 0
		PRINT 絶対回避  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:闘争本能 > 0
		PRINT 恍惚耐性  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:溢れる生命力 > 0
		PRINT 回復量アップ  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:生粋の戦士 > 0
		PRINT 気絶耐性  被CRT防止  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:剛腕 > 0
		PRINT 振り解き率アップ  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:エアマスター > 0
		PRINT 空中性能強化  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:有翼 > 0
		PRINT 空中ダッシュゲージ+1  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:空中浮遊 > 0
		PRINT 空中ダッシュ疲労軽減  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:小さな体躯 > 0
		PRINT 着地ペナルティ無効  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:ホットスタート > 0
		PRINT 常にバースト攻撃可能  
		LOCAL:4 += 1
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:フルバースト > 0
		PRINT バースト攻撃の威力アップ  
		LOCAL:4 += 1
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:祝福 > 0
		PRINT 状態異常耐性  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:不屈 > 0
		PRINT 消耗ペナルティ軽減  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:スタミナ > 0
		PRINT 持久力アップ  
		SIF LOCAL:1 < 3
			LOCAL:1 = 3
	ENDIF
	IF TALENT:平凡 > 0
		PRINT 油断させやすい  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF
	IF TALENT:背徳の烙印 > 0
		PRINT 搾精ダメージアップ  
		SIF LOCAL:1 < 2
			LOCAL:1 = 2
	ENDIF

	SIF LOCAL:1 > 2
		PRINTL 

	;デメリット効果
	PRINT    
	SETCOLOR 255,200,255
	SIF TALENT:攻勢構築 > 0
		PRINT 油断させにくい  
	SIF TALENT:剛腕 > 0
		PRINT 振り解くと疲労+1  
	SIF TALENT:エアマスター > 0
		PRINT 空中ダッシュで疲労+1  
	SIF TALENT:有翼 > 0
		PRINT 着地時に疲労+1  
	SIF TALENT:空中浮遊 > 0
		PRINT 移動系コマンドで疲労+1  
	SIF TALENT:小さな体躯 > 0
		PRINT 振り解き率ダウン  
	IF LOCAL:4 > 0
		PRINT バースト攻撃の反動+
		PRINTFORM {LOCAL:4}  
	ENDIF
	SIF TALENT:祝福 > 0
		PRINT 粘液,波動ダメージ増大  
	SIF TALENT:不屈 > 0 || TALENT:スタミナ > 0
		PRINT EXゲージが上昇しにくい  
	RESETCOLOR
ELSE
	PRINTL ─
ENDIF
SIF LOCAL:1 > 1
	PRINTL 

;空白行
PRINTL 

;--------------------------------------------------
;戦闘・敵情報

;触手
IF FLAG:110 == 0
	CALL TENTACLE_ACCESS, "NAME"
	IF FLAG:10 == 0
		PRINT (ＢＯＳＳ)
	ELSEIF FLAG:10 == 1
		PRINT (ＬＡＳＴ)
	ELSEIF FLAG:10 == 2
		PRINT (ＭＯＢ)
	ENDIF
	CALL TENTACLE_LEVEL
	PRINTFORM  Lv.{RESULT} 
;対キャラ
ELSEIF FLAG:110 == 1
	PRINTFORM %PRINT_TRANSCALLNAME(FLAG:111)%
	IF CFLAG:(FLAG:111):0 == 2
		PRINT （洗脳中）
	ELSEIF CFLAG:(FLAG:111):0 == 3
		PRINT （悪堕ち）
	ENDIF
	PRINTFORM  Lv.{ABL:(FLAG:111):レベル} 
ENDIF
IF TFLAG:24 > 0
	PRINTFORM に先制攻撃(残り{TFLAG:24}ターン)
ELSE
	PRINTFORM と戦闘中
ENDIF

IF FLAG:45 > 0 || FLAG:10 == 2
	PRINTFORM 　時間：{TFLAG:0}/25
ELSE
	PRINTFORM 　時間：{TFLAG:0}/60
ENDIF
PRINT 　現在の心境：
CALL SHINKYOU_CHECK, "PRINTSTATE", 0
PRINTL 

;幽閉・洗脳状況
LOCAL = 0
LOCAL:1 = 0
FOR CCOUNT, 0, CHARANUM
	SIF CCOUNT == MASTER
		CONTINUE
	SIF CFLAG:CCOUNT:0 == 1 && CFLAG:CCOUNT:21 == FLAG:11
		LOCAL += 1
	SIF CFLAG:CCOUNT:0 == 2 && CFLAG:CCOUNT:21 == FLAG:11
		LOCAL:1 += 1
NEXT
SIF LOCAL
	PRINTFORM 　幽閉中：{LOCAL}人
SIF LOCAL:1
	PRINTFORM 　洗脳中：{LOCAL:1}人
SIF LOCAL || LOCAL:1
	PRINTL 
PRINTL 

;体力
CALL COLORSENTENCE_ENEMYBAR,"敵体力", FLAG:13, FLAG:12, 20
;油断
IF TFLAG:2 >= 1
	PRINT 　<<油断中>> 
ELSEIF FLAG:20 >= 100 || FLAG:110 == 1
	PRINTFORM 　(油断度：{FLAG:17 * 100 / FLAG:16}％) 
ENDIF
PRINTL 
	
;射精ゲージ
IF FLAG:110 == 0 && FLAG:11 == 901
	PRINTFORM 敵絶頂
	CALL COLORSENTENCE_ENEMYBAR,"敵絶頂", FLAG:15, FLAG:14, 20
ELSEIF FLAG:110 == 0
	PRINTFORM %STR:2500%射精
	CALL COLORSENTENCE_ENEMYBAR,"敵射精", FLAG:15, FLAG:14, 20
ELSEIF FLAG:110 == 1 && (TALENT:(FLAG:111):オトコ > 0 || TALENT:(FLAG:111):ふたなり > 0 || TALENT:(FLAG:111):寄生 > 0)
	PRINTFORM 敵射精
	CALL COLORSENTENCE_ENEMYBAR,"敵射精", FLAG:15, FLAG:14, 20
ELSE
	PRINTFORM 敵絶頂
	CALL COLORSENTENCE_ENEMYBAR,"敵絶頂", FLAG:15, FLAG:14, 20
ENDIF
PRINTL 
;デバッグモードか解析度７５％以上か相手が洗脳/悪堕ちキャラならステータス表示
IF FLAG:999 == 1 || FLAG:20 >= 75 || FLAG:110 > 0
	IF FLAG:110 == 0
		CALL TENTACLE_ACCESS, "KOUGEKI"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 攻：{RESULT} 
		CALL TENTACLE_ACCESS, "BOUGYO"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 防：{RESULT} 
		CALL TENTACLE_ACCESS, "BINSYOU"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 敏：{RESULT} 
		CALL TENTACLE_ACCESS, "CHISEI"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 知：{RESULT} 
		PRINTL 
		IF FLAG:20 >= 100
			CALL TENTACLE_ACCESS, "SHORT"
			PRINTFORM 近：{RESULT} 
			CALL TENTACLE_ACCESS, "MIDDLE"
			PRINTFORM 中：{RESULT} 
			CALL TENTACLE_ACCESS, "LONG"
			PRINTFORM 遠：{RESULT} 
			CALL TENTACLE_ACCESS, "HOLD"
			PRINTFORM 捕：{RESULT} 
			PRINTL 
		ELSE
			PRINTFORML 解析度：{FLAG:20}％
		ENDIF
	ELSEIF FLAG:110 == 1
		PRINTFORM 攻：{MAXBASE:(FLAG:111):攻撃} 
		PRINTFORM 防：{MAXBASE:(FLAG:111):防御} 
		PRINTFORM 敏：{MAXBASE:(FLAG:111):敏捷} 
		PRINTFORM 知：{MAXBASE:(FLAG:111):知性} 
		PRINTL 
		PRINTFORM 近：{ABL:(FLAG:111):近距離} 
		PRINTFORM 中：{ABL:(FLAG:111):中距離} 
		PRINTFORM 遠：{ABL:(FLAG:111):遠距離} 
		PRINTL 
	ENDIF
ELSE
	PRINTFORML 解析度：{FLAG:20}％
ENDIF

;--------------------------------------------------
;キャラの性ステータス
CALL SHOW_STATUS_PALAM

SIF CONFIG_CHECK_SCREEN_F(2) > 0
	RETURN 0

DRAWLINE
IF TCVAR:0 == 0
	IF (TCVAR:12 & 強拘束)
		SETCOLOR 200,50,50
		PRINT   <<強拘束中>>
	ELSE
		SETCOLOR 255, 146, 238
		PRINT   <<拘束中>>
	ENDIF
	RESETCOLOR
	PRINTL 
ENDIF

;--------------------------------------------------
;パラメータ表示
@SHOW_STATUS_PALAM
#DIM CAL_VAR, 2
PRINTL 

;拡張度の表示
IF CFLAG:34 > 0 && FILTER_CHECK_F(16) == 0
	CALL PRINTFORM_GAPING_NOW,TARGET, CFLAG:1
	PRINTL 
ENDIF

REPEAT 12
	LOCAL = COUNT
	SIF COUNT > 3
		LOCAL += 6

	IF COUNT < 感覚数
		IF BASE:(COUNT + 30) > 0
			CALL PERCENT_CAL, BASE:(COUNT + 30), MAXBASE:(COUNT + 30)
			CAL_VAR:0 = LIMIT(255 - RESULT * RESULT * 4 / 200, 0, 255)
			CAL_VAR:1 = LIMIT(-215 - RESULT * RESULT / 100 + RESULT * 5, 0, 255)
			PRINTFORM %TALENTNAME:(COUNT + 190)%　%UNICODE(0x208D)%
			CALL COLOR_BAR(BASE:(COUNT + 30),MAXBASE:(COUNT + 30),13,CAL_VAR:0,CAL_VAR:1,20,-160,6,32,20,1,UNICODE(0x25AE),UNICODE(0x25AE))
			PRINTFORM %UNICODE(0x208E)% 
		ELSE
			PRINTFORM %PALAMNAME:LOCAL% 
			PRINTFORM  {PALAM:LOCAL,6}
		ENDIF
	ELSE
		PRINTFORM %PALAMNAME:LOCAL% 
		PRINTFORM  {PALAM:LOCAL,6}
	ENDIF

	IF COUNT >= 感覚数 || BASE:(COUNT + 30) <= 0
		;パラメータ取得レベルの表示
		IF PALAM:LOCAL < 100
			PRINT   -  [Lv.0] 
		ELSEIF PALAM:LOCAL < 300
			PRINT   -  [Lv.1] 
		ELSEIF PALAM:LOCAL < 600
			PRINT   -  [Lv.2] 
		ELSEIF PALAM:LOCAL < 1500
			PRINT   -  [Lv.3] 
		ELSEIF PALAM:LOCAL < 3000
			PRINT   -  [Lv.4] 
		ELSEIF PALAM:LOCAL < 6000
			PRINT   -  [Lv.5] 
		ELSEIF PALAM:LOCAL < 10000
			PRINT   -  [Lv.6] 
		ELSEIF PALAM:LOCAL < 30000
			PRINT   -  [Lv.7] 
		ELSEIF PALAM:LOCAL < 60000
			PRINT   -  [Lv.8] 
		ELSEIF PALAM:LOCAL < 150000
			PRINT   -  [Lv.9] 
		ELSEIF PALAM:LOCAL < 300000
			PRINT  -  [Lv.10] 
		ELSE
			PRINT  - [Lv.MAX] 
		ENDIF
	ENDIF
	
	SIF COUNT == 2 || COUNT == 5 || COUNT == 8
		PRINTL 
REND
PRINTL 




;------------------------------------------------------------------------------------
;距離表示
@PRINT_DISTANCE
VARSET LOCALS
PRINT [
IF TCVAR:0 == 0
	SETCOLOR 255, 146, 238
	LOCALS = 拘束中
ELSE
	IF TCVAR:0 == 1
		SETCOLOR 255,0,0
		LOCALS = 近
	ELSEIF TCVAR:0 == 2
		SETCOLOR 255,255,0
		LOCALS = 中
	ELSEIF TCVAR:0 == 3
		SETCOLOR 64,255,64
		LOCALS = 遠
	ENDIF
	IF GETBIT(TCVAR:216, 1)
		LOCALS:1 = 空中
	ELSEIF GETBIT(TCVAR:216, 2)
		LOCALS:1 = 着地
	ELSE
		LOCALS:1 = 距離
	ENDIF
ENDIF
PRINTFORM %LOCALS%
IF GETBIT(TCVAR:216, 1)
	SETCOLOR 0,60,255
ELSEIF GETBIT(TCVAR:216, 2)
	SETCOLOR 255,128,0
ENDIF
PRINTFORM %LOCALS:1%
RESETCOLOR
PRINT ]















