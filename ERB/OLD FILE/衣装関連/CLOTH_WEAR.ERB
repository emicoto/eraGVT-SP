;**********************************************************
;衣装の設定
@CLOTH_WEAR
#DIM CUSTOMIZE, 2
#DIM CUSTOMIZE_INNER, 2
$INPUT_LOOP_FUNCTIONSTART
PRINTL 
PRINTL 【衣装の設定】
IF CHARANUM >= 3
	CALL CHARA_LIST, 1
ELSE
	RESULT = 1
ENDIF
PRINTL 
IF RESULT == 999
ELSE
	LOCAL = RESULT
	LOCAL:1 = LINECOUNT
	DRAWLINE
	$INPUT_LOOP
	CLEARLINE LINECOUNT - LOCAL:1
	PRINTFORML ◆%CALLNAME:LOCAL%の衣装設定
	PRINT 【アウター】
	IF CFLAG:LOCAL:40 == 0
		PRINTFORML なし
	ELSE
		IF CSTR:LOCAL:8 == ""
			PRINTFORML %ITEMNAME:(CFLAG:LOCAL:40)%
		ELSE
			PRINTFORML %CSTR:LOCAL:8%（%ITEMNAME:(CFLAG:LOCAL:40)%）
		ENDIF
	ENDIF
	IF TALENT:LOCAL:変身能力 == 1
		PRINT 【アウター】
		IF CFLAG:LOCAL:41 == 0
			PRINTFORM なし
			PRINTL （変身後）
		ELSE
			IF CSTR:LOCAL:9 == ""
				PRINTFORM %ITEMNAME:(CFLAG:LOCAL:41)%
			ELSE
				PRINTFORM %CSTR:LOCAL:9%（%ITEMNAME:(CFLAG:LOCAL:41)%）
			ENDIF
			PRINTL （変身後）
		ENDIF
	ENDIF
	PRINT 【インナー】
	IF CFLAG:LOCAL:42 == 0
		PRINTFORML なし
	ELSE
		PRINTFORML %ITEMNAME:(CFLAG:LOCAL:42)%
	ENDIF
	PRINT 【その他　】
	IF CFLAG:LOCAL:43 == 0
		PRINTFORML なし
	ELSE
		PRINTFORML %ITEMNAME:(CFLAG:LOCAL:43)%
	ENDIF
	DRAWLINE
	PRINTL どの衣装を設定しますか？
	PRINT [1]アウター　　　　　　　　　　
	TRYCCALLFORM CLOTH_CUSTOMIZE_{CFLAG:LOCAL:40}
		CUSTOMIZE:0 = RESULT
	CATCH
		CUSTOMIZE:0 = 0
	ENDCATCH
	IF CUSTOMIZE:0 >= 0 && CFLAG:LOCAL:40 != 0
		PRINT [10]カスタマイズ　　　　
	ELSEIF CFLAG:LOCAL:40 != 0
		SETCOLOR 96,96,96
		PRINTPLAIN [10]カスタマイズ　　　　
		RESETCOLOR
	ENDIF
	SIF CFLAG:LOCAL:40 != 0
		PRINT [11]名称変更　　　　　
	SIF CSTR:LOCAL:8 != "" && CFLAG:LOCAL:40 != 0
		PRINT [12]消去
	PRINTL 
	IF TALENT:LOCAL:変身能力 == 0 || TALENT:LOCAL:変身能力 == -1
		PRINT [2]インナー　　　　　　　　　　
		TRYCCALLFORM CLOTH_CUSTOMIZE_{CFLAG:LOCAL:42}
		CUSTOMIZE_INNER:0 = RESULT
		CATCH
			CUSTOMIZE_INNER:0 = 0
		ENDCATCH
		IF CUSTOMIZE_INNER:0 >= 0 && CFLAG:LOCAL:42 != 0
			PRINT [20]カスタマイズ　　　　
		ELSEIF CFLAG:LOCAL:42 != 0
			SETCOLOR 96,96,96
			PRINTPLAIN [20]カスタマイズ　　　　
			RESETCOLOR
		ENDIF
		PRINTL 
		PRINTL [3]その他装備品
	ELSEIF TALENT:LOCAL:変身能力 == 1
		PRINT [2]アウター（変身後）　　　　　
		TRYCCALLFORM CLOTH_CUSTOMIZE_{CFLAG:LOCAL:41}
			CUSTOMIZE:1 = RESULT
		CATCH
			CUSTOMIZE:1 = 0
		ENDCATCH
		IF CUSTOMIZE:1 >= 0 && CFLAG:LOCAL:41 != 0
			PRINT [20]カスタマイズ　　　　
		ELSEIF CFLAG:LOCAL:41 != 0
			SETCOLOR 96,96,96
			PRINTPLAIN [20]カスタマイズ　　　　
			RESETCOLOR
		ENDIF
		SIF CFLAG:LOCAL:41 != 0
			PRINT [21]名称変更　　　　　
		SIF CSTR:LOCAL:9 != "" && CFLAG:LOCAL:41 != 0
			PRINT [22]消去
		PRINTL 
		PRINT [3]インナー　　　　　　　　　　
		TRYCCALLFORM CLOTH_CUSTOMIZE_{CFLAG:LOCAL:42}
		CUSTOMIZE_INNER:0 = RESULT
		CATCH
			CUSTOMIZE_INNER:0 = 0
		ENDCATCH
		IF CUSTOMIZE_INNER:0 >= 0 && CFLAG:LOCAL:42 != 0
			PRINT [30]カスタマイズ
		ELSEIF CFLAG:LOCAL:42 != 0
			SETCOLOR 96,96,96
			PRINTPLAIN [30]カスタマイズ
			RESETCOLOR
		ENDIF
		PRINTL 
		PRINTL [4]その他装備品
	ENDIF
	DRAWLINE
	PRINTL [100]所持衣装一覧
	DRAWLINE
	PRINTL [999]戻る
	INPUT
	IF RESULT == 999
		IF CHARANUM >= 3
			GOTO INPUT_LOOP_FUNCTIONSTART
		ELSE
			RETURN
		ENDIF
	ELSEIF RESULT == 1
		CALL CLOTH_SETTING_OUTER, LOCAL
		GOTO INPUT_LOOP
	ELSEIF RESULT == 2 && TALENT:LOCAL:変身能力 == 1
		CALL CLOTH_SETTING_OUTER2, LOCAL
		GOTO INPUT_LOOP
	ELSEIF (RESULT == 2 && TALENT:LOCAL:変身能力 < 1) || (RESULT == 3 && TALENT:LOCAL:変身能力 == 1)
		IF CFLAG:LOCAL:42 == 400
			CALL CLOTH_RESETTING_TENTACLECLOTH, LOCAL
		ELSE
			CALL CLOTH_SETTING_INNER, LOCAL
		ENDIF
		GOTO INPUT_LOOP
	ELSEIF (RESULT == 3 && TALENT:LOCAL:変身能力 < 1) || (RESULT == 4 && TALENT:LOCAL:変身能力 == 1)
		CALL CLOTH_SETTING_MISC, LOCAL
		GOTO INPUT_LOOP
	ELSEIF RESULT == 10 && CUSTOMIZE:0 >= 0 && CFLAG:LOCAL:40 != 0
		CALL CLOTH_CUSTOMIZE_OUTER, LOCAL, 40
		GOTO INPUT_LOOP
	ELSEIF RESULT == 11 && CFLAG:LOCAL:40 != 0
		PRINTL 名称を入力してください：
		INPUTS
		CSTR:LOCAL:8 = %RESULTS%
		GOTO INPUT_LOOP
	ELSEIF RESULT == 12 && CFLAG:LOCAL:40 != 0
		CSTR:LOCAL:8 =
		GOTO INPUT_LOOP
	ELSEIF (RESULT == 20 && TALENT:LOCAL:変身能力 < 1) || (RESULT == 30 && TALENT:LOCAL:変身能力 == 1)
		IF CUSTOMIZE_INNER:0 >= 0 && CFLAG:LOCAL:42 != 0
			CALL CLOTH_CUSTOMIZE_INNER, LOCAL, 42
			GOTO INPUT_LOOP
		ENDIF
	ELSEIF RESULT == 20 && CUSTOMIZE:1 >= 0 && CFLAG:LOCAL:41 != 0 && TALENT:LOCAL:変身能力 == 1
		IF CUSTOMIZE:1 > 0
			CALL CLOTH_CUSTOMIZE_OUTER2, LOCAL, 41
		ELSE
			CALL CLOTH_CUSTOMIZE_OUTER, LOCAL, 41
		ENDIF
		GOTO INPUT_LOOP
	ELSEIF RESULT == 21 && TALENT:LOCAL:変身能力 == 1 && CFLAG:LOCAL:41 != 0
		PRINTL 名称を入力してください：
		INPUTS
		CSTR:LOCAL:9 = %RESULTS%
		GOTO INPUT_LOOP
	ELSEIF RESULT == 22 && TALENT:LOCAL:変身能力 == 1 && CFLAG:LOCAL:41 != 0
		CSTR:LOCAL:9 =
		GOTO INPUT_LOOP
	ELSEIF RESULT == 100
		CALL SHOW_CLOTH("表示画面")
		GOTO INPUT_LOOP
	ELSE
		PRINTL 
		PRINTW 正しい値を入力してください
		GOTO INPUT_LOOP
	ENDIF
ENDIF


;----------------------------------------------------------
;アウターの設定
@CLOTH_SETTING_OUTER, ARG
$INPUT_LOOP
PRINTL 
PRINTL アウターを選んでください
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 100, 200
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
PRINTL 
DRAWLINE
PRINTL [0]変更しないで戻る
PRINTL [1]アウターを設定しない
INPUT
IF RESULT == 0
ELSEIF RESULT == 1
	SIF CFLAG:ARG:40 == 199
		CFLAG:ARG:41 = 0
	CFLAG:ARG:40 = 0
	PRINTL アウターを設定しませんでした
	PRINTW 
ELSEIF RESULT >= 100 && RESULT < 300
	LOCAL = RESULT
	;非戦闘員専用
	IF LOCAL == 197 && ITEM:LOCAL == 1 && TALENT:ARG:変身能力 != -1
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0]変更しない
		SETCOLOR 126,126,126
		PRINTL [1]変更する
		RESETCOLOR
		$INPUT_LOOP2
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			GOTO INPUT_LOOP2
		ELSE
			PRINTL 
			PRINTW 正しい値を入力してください
			GOTO INPUT_LOOP2
		ENDIF

	ELSEIF ITEM:LOCAL == 1
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0]変更しない
		PRINTL [1]変更する
		$INPUT_LOOP3
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			SIF CFLAG:ARG:40 == 199
				CFLAG:ARG:41 = 0
			CFLAG:ARG:40 = LOCAL
			PRINTFORML アウターを%ITEMNAME:LOCAL%に変更しました
			PRINTW 
			SIF CFLAG:ARG:40 == 199
				CFLAG:ARG:41 = 199
		ELSE
			PRINTL 
			PRINTW 正しい値を入力してください
			GOTO INPUT_LOOP3
		ENDIF

	ELSE
		PRINTL 
		PRINTW 正しい値を入力してください
		GOTO INPUT_LOOP
	ENDIF
ELSE
	PRINTL 
	PRINTW 正しい値を入力してください
	GOTO INPUT_LOOP
ENDIF



;----------------------------------------------------------
;アウター（変身後）の設定
@CLOTH_SETTING_OUTER2, ARG
$INPUT_LOOP
PRINTL 
PRINTL アウター（変身後）を選んでください
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 100, 300
	;非戦闘員専用
	SIF LOCAL == 197
		CONTINUE
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
;邪悪なる魔装
IF EXP:ARG:陥落経験 > 0
	LOCALS:0 = [401]%ITEMNAME:401%
	PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
	LOCAL:1 += 1
	IF LOCAL:1 == 3
		LOCAL:1 = 0
		PRINTL 
	ENDIF
ENDIF
PRINTL 
DRAWLINE
PRINTL [0]変更しないで戻る
PRINTL [1]アウター（変身後）を設定しない
INPUT
IF RESULT == 0
ELSEIF RESULT == 1
	SIF CFLAG:ARG:40 == 199
		CFLAG:ARG:41 = 0
	CFLAG:ARG:41 = 0
	PRINTL アウター（変身後）を設定しませんでした
	PRINTW 
ELSEIF RESULT >= 100 && RESULT < 300 || RESULT == 401
	LOCAL = RESULT
	;非戦闘員専用
	IF LOCAL == 197 && TALENT:変身能力 != -1
		PRINTL 
		PRINTW 正しい値を入力してください
		GOTO INPUT_LOOP
	ELSEIF ITEM:LOCAL == 1 || (LOCAL == 401 && EXP:ARG:陥落経験 > 0)
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0]変更しない
		PRINTL [1]変更する
		$INPUT_LOOP2
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			SIF CFLAG:ARG:41 == 199
				CFLAG:ARG:40 = 0
			;変身コスチュームのカスタマイズをリセット
			IF CFLAG:ARG:41 != LOCAL
				FOR LOCAL:1, 600, 700
					EQUIP:ARG:(LOCAL:1) = 0
				NEXT
			ENDIF
			CFLAG:ARG:41 = LOCAL
			PRINTFORML アウター（変身後）を%ITEMNAME:LOCAL%に変更しました
			PRINTW 
			SIF CFLAG:ARG:41 == 199
				CFLAG:ARG:40 = 199
		ELSE
			PRINTL 
			PRINTW 正しい値を入力してください
			GOTO INPUT_LOOP2
		ENDIF

	ELSE
		PRINTL 
		PRINTW 正しい値を入力してください
		GOTO INPUT_LOOP
	ENDIF
ELSE
	PRINTL 
	PRINTW 正しい値を入力してください
	GOTO INPUT_LOOP
ENDIF

;----------------------------------------------------------
;インナーの設定
@CLOTH_SETTING_INNER, ARG
$INPUT_LOOP
PRINTL 
PRINTL インナーを選んでください
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 300, 400
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL,21,LEFT%
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
PRINTL 
DRAWLINE
PRINTL [0]変更しないで戻る
PRINTL [1]インナーを設定しない
INPUT
IF RESULT == 0
ELSEIF RESULT == 1
	CFLAG:ARG:42 = 0
	PRINTL インナーを設定しませんでした
	PRINTW 
ELSEIF RESULT >= 300 && RESULT < 400
	LOCAL = RESULT
	IF ITEM:LOCAL == 1
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0]変更しない
		PRINTL [1]変更する
		$INPUT_LOOP2
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			CFLAG:ARG:42 = LOCAL
			PRINTFORML インナーを%ITEMNAME:LOCAL%に変更しました
			PRINTL 
			IF CFLAG:ARG:42 == 399
				CFLAG:ARG:42 = 400
				PRINTFORMW 
				PRINTFORML 突如、%PRINT_CALLNAME(ARG)%が身につけた%ITEMNAME:399%が激しく蠢きだした。
				PRINTFORML 布地の内側に触手を生やした%ITEMNAME:399%は%PRINT_CALLNAME(ARG)%の柔肌にしがみつくと
				PRINTFORML 無防備な胸や秘部に吸い付き、舐め回した。
				PRINTFORMW 
				PRINTFORML 喘ぎ混じりの悲鳴を上げる%PRINT_CALLNAME(ARG)%をよそに%ITEMNAME:399%は擬態を解き
				PRINTFORML %PRINT_CALLNAME(ARG)%を常に弄ぶ拘束具へと変貌を遂げたのだった・・・
				PRINTFORMW 
			ENDIF
			IF CFLAG:ARG:42 != 308
				IF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 2
					;露出度合い
					LOCAL = 0
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 2
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 3
						LOCAL -= 2
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 2
						LOCAL -= 4

					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 4
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 3
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 4
						LOCAL += 2
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 5) == 4
						LOCAL += 1

					;補正効果
					;軽装
					SIF LOCAL < 0
						EQUIP:ARG:103 += LOCAL * POWER(10, 9)
					;重装
					SIF LOCAL > 0
						EQUIP:ARG:103 -= LOCAL * POWER(10, 10)
					;下着保護ダウン
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 2
						EQUIP:ARG:103 -= 4 * POWER(10, 11)
					;下着保護アップ
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 4
						EQUIP:ARG:103 -= 2 * POWER(10, 12)
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 5) == 4
						EQUIP:ARG:103 -= 1 * POWER(10, 12)
					EQUIP:ARG:103 -= 2000
				ENDIF
				IF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 2
					;露出度合い
					LOCAL = 0
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 2
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 3
						LOCAL -= 2
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 2
						LOCAL -= 4

					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 4
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 3
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 4
						LOCAL += 2
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 5) == 4
						LOCAL += 1

					;補正効果
					;軽装
					SIF LOCAL < 0
						EQUIP:ARG:3 += LOCAL * POWER(10, 9)
					;重装
					SIF LOCAL > 0
						EQUIP:ARG:3 -= LOCAL * POWER(10, 10)
					;下着保護ダウン
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 2
						EQUIP:ARG:3 -= 4 * POWER(10, 11)
					;下着保護アップ
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 4
						EQUIP:ARG:3 -= 2 * POWER(10, 12)
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 5) == 4
						EQUIP:ARG:3 -= 1 * POWER(10, 12)
					EQUIP:ARG:3 -= 2000
				ENDIF
			ENDIF
		ELSE
			PRINTL 
			PRINTW 正しい値を入力してください
			GOTO INPUT_LOOP2
		ENDIF

	ELSE
		PRINTL 
		PRINTW 正しい値を入力してください
		GOTO INPUT_LOOP
	ENDIF
	
ENDIF


;----------------------------------------------------------
;その他装備品の設定
@CLOTH_SETTING_MISC, ARG
$INPUT_LOOP
PRINTL 
PRINTL その他装備品を選んでください
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 500, 600
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
PRINTL 
DRAWLINE
PRINTL [0]変更しないで戻る
PRINTL [1]その他装備品を設定しない
INPUT
IF RESULT == 0
ELSEIF RESULT == 1
	CFLAG:ARG:43 = 0
	PRINTL その他装備品を設定しませんでした
	PRINTW 
ELSE
	LOCAL = RESULT
	IF ITEM:LOCAL == 1
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0]変更しない
		PRINTL [1]変更する
		$INPUT_LOOP2
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			CFLAG:ARG:43 = LOCAL
			PRINTFORML その他装備品を%ITEMNAME:LOCAL%に変更しました
			PRINTW 
		ELSE
			PRINTL 
			PRINTW 正しい値を入力してください
			GOTO INPUT_LOOP2
		ENDIF

	ELSE
		PRINTL 
		PRINTW 正しい値を入力してください
		GOTO INPUT_LOOP
	ENDIF
ENDIF


;----------------------------------------------------------
;触手拘束具の取り外し
@CLOTH_RESETTING_TENTACLECLOTH, ARG
$INPUT_LOOP
PRINTL 
PRINTFORML %ITEMNAME:400%を取り外すには触手の欠片が1個必要です（現在の所持数：{FLAG:200}個）
PRINTFORML %ITEMNAME:400%を取り外しますか？
PRINTL 
PRINTL [0]いいえ
PRINTL [1]はい
INPUT
IF RESULT == 0
ELSEIF RESULT == 1
	IF FLAG:200 < 1
		PRINTL 触手の欠片が足りません
		PRINTW 
		GOTO INPUT_LOOP
	ELSE
		FLAG:200 -= 1
		CFLAG:ARG:42 = 0
		PRINTFORML %ITEMNAME:400%を取り外しました
		PRINTW 
	ENDIF
ELSE
	PRINTL 
	PRINTW 正しい値を入力してください
	GOTO INPUT_LOOP
ENDIF



;------------------------------------------------------------------------------------------------------------------------------------------------------------
;アウター（通常）のカスタマイズ
@CLOTH_CUSTOMIZE_OUTER, ARG, ARG:1
#DIM KEEPTARGET
#DIM LINE
#DIM STR_LENGTH
#DIM TAIRYOKU_CAL
#DIM KIRYOKU_CAL
#DIM ID
IF TALENT:ARG:変身能力 > 0 && ARG:1 == 41
	CFLAG:ARG:1 = 1
	ID = CFLAG:ARG:(ARG:1)
ELSE
	ID = CFLAG:ARG:(ARG:1) - 100
ENDIF
LINE = LINECOUNT
STR_LENGTH = 35
KEEPTARGET = TARGET
TARGET = ARG
;体力気力の補正値を読み込み
IF CFLAG:ARG:(ARG:1) > 199
	TAIRYOKU_CAL = 10
	KIRYOKU_CAL = 10
ELSE
	TAIRYOKU_CAL = 5
	KIRYOKU_CAL = 5
ENDIF

$MASTER_LOOP
VARSET LOCAL
PRINTL 
PRINT カスタマイズ項目を選んでください
SIF ARG:1 == 41
	PRINT （変身時）
PRINTL 
DRAWLINE
PRINTFORML %ITEMNAME:(CFLAG:ARG:(ARG:1)), 30,LEFT%
;衣装の性能
PRINT 【 基本 】
VARSET LOCALS
;攻撃
TRYCCALLFORM CLOTH_HOSEI_KOUGEKI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"攻撃%LOCALS%倍　"
ENDIF
;防御
TRYCCALLFORM CLOTH_HOSEI_BOUGYO_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"防御%LOCALS%倍　"
ENDIF
;敏捷
TRYCCALLFORM CLOTH_HOSEI_BINSYOU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"敏捷%LOCALS%倍　"
ENDIF
;知性
TRYCCALLFORM CLOTH_HOSEI_CHISEI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"知性%LOCALS%倍　"
ENDIF
;体力
TRYCCALLFORM CLOTH_HOSEI_TAIRYOKU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF (RESULT + TAIRYOKU_CAL) != 100
	RESULT += TAIRYOKU_CAL
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の体力の減少量%LOCALS%倍　"
ENDIF
;気力
TRYCCALLFORM CLOTH_HOSEI_KIRYOKU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF (RESULT + KIRYOKU_CAL) != 100
	RESULT += KIRYOKU_CAL
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の気力の減少量%LOCALS%倍　"
ENDIF
;性耐性
TRYCCALLFORM CLOTH_HOSEI_SEITAISEI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF (RESULT) != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の性耐性の減少量%LOCALS%倍　"
ENDIF
;油断度
TRYCCALLFORM CLOTH_HOSEI_YUDAN_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF (RESULT) != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"触手の油断度の上昇量%LOCALS%倍　"
ENDIF
;クリティカル率
TRYCCALLFORM CLOTH_HOSEI_CRITICAL_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT != 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"クリティカル補正 +%LOCALS%％　"
ENDIF
;命中率強化
TRYCCALLFORM CLOTH_HOSEI_HIT_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF CFLAG:ARG:1 > 0
	RESULT += 1 * ((FIGURE_SPLIT(EQUIP:ARG:(CFLAG:ARG:(ARG:1)),11) - FIGURE_SPLIT(EQUIP:ARG:(CFLAG:ARG:(ARG:1)),10)))
ELSE
	RESULT += 1 * ((FIGURE_SPLIT(EQUIP:ARG:(CFLAG:ARG:(ARG:1) - 100),11) - FIGURE_SPLIT(EQUIP:ARG:(CFLAG:ARG:(ARG:1) - 100),10)))
ENDIF
IF RESULT > 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"命中率補正 +%LOCALS%％　"
ELSEIF RESULT < 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"命中率補正 %LOCALS%％　"
ENDIF
;回避率
TRYCCALLFORM CLOTH_HOSEI_AVOID_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT != 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"回避率補正	+%LOCALS%％　"
ENDIF
;ＥＸブースト
TRYCCALLFORM CLOTH_HOSEI_EXBOOST_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"EXゲージ増幅　"
ENDIF
;空中性能強化
TRYCCALLFORM CLOTH_HOSEI_AIRPLUS_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"空中性能強化　"
ENDIF
;粘液軽減
TRYCCALLFORM CLOTH_HOSEI_LIQUID_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT <= 70
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（大）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（中）　"
ELSEIF RESULT <= 90
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（小）　"
ENDIF
;波動軽減
TRYCCALLFORM CLOTH_HOSEI_WAVE_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT <= 70
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（大）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（中）　"
ELSEIF RESULT <= 90
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（小）　"
ENDIF
;支援回復効果アップ
TRYCCALLFORM CLOTH_HOSEI_HEALUP_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"支援時の回復効果増幅　"
ENDIF
;インナー兼用
TRYCCALLFORM CLOTH_NO_INNER_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"インナー兼用　"
ENDIF

;露出度
TRYCCALLFORM CLOTH_HOSEI_SHYNESS_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT > 130
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"露出度が高い（大）　"
ELSEIF RESULT > 115
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"露出度が高い（中）　"
ELSEIF RESULT > 100
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"露出度が高い（小）　"
ENDIF

PRINTFORML %LOCALS:1%
IF LOCALS:2 != ""
	PRINT 　　　　　
	PRINTFORML %LOCALS:2%
ENDIF
PRINT 【 補正 】
;重量補正
LOCAL = FIGURE_SPLIT(EQUIP:ARG:ID,11) - FIGURE_SPLIT(EQUIP:ARG:ID,10)
SIF LOCAL > 0
	PRINTFORM 命中-{LOCAL}％　
SIF LOCAL < 0
	PRINTFORM 命中+{-1*LOCAL}％　
;下着保護
LOCAL = FIGURE_SPLIT(EQUIP:ARG:ID,13) - FIGURE_SPLIT(EQUIP:ARG:ID,12)
IF LOCAL > 0
	IF CLOTH_NO_INNER == 0
		PRINTFORM 下着保護+{5*LOCAL}％　
	ELSE
		PRINTFORM 挿入抵抗+{5*LOCAL}％　
	ENDIF
ELSEIF LOCAL < 0
	IF CLOTH_NO_INNER == 0
		PRINTFORM 下着保護{5*LOCAL}％　
	ELSE
		PRINTFORM 挿入抵抗{5*LOCAL}％　
	ENDIF
ENDIF
PRINTL 
PRINT 【耐久力】
TRYCALLFORM CLOTH_HP_{CFLAG:ARG:(ARG:1)}
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "HP"
IF RESULT > 0
	PRINTFORM {RESULT}
ELSE
	PRINT ─
ENDIF
PRINTL 
DRAWLINE
TRYCALLFORM CLOTH_CUSTOMIZE_OPTION_{CFLAG:ARG:(ARG:1)},ARG
IF RESULT == 99
	CFLAG:ARG:1 = 0
	RETURN
ELSEIF RESULT == -1
	CLEARLINE LINECOUNT - LINE
	GOTO MASTER_LOOP
ENDIF

;------------------------------------------------------------------------------------------------------------------------------------------------------------
;アウター（変身後専用）のカスタマイズ
@CLOTH_CUSTOMIZE_OUTER2, ARG, ARG:1
#DIM KEEPTARGET
#DIM SLOTMAX
#DIM SLOTUSED
#DIM LINE
#DIM STR_LENGTH
#DIM TAIRYOKU_CAL
#DIM KIRYOKU_CAL
LINE = LINECOUNT
STR_LENGTH = 36
KEEPTARGET = TARGET
TARGET = ARG
;体力気力の補正値を読み込み
TRYCALLFORM CLOTH_HOSEI_TAIRYOKU_{CFLAG:ARG:(ARG:1)}
TAIRYOKU_CAL = 100 - RESULT
TRYCALLFORM CLOTH_HOSEI_KIRYOKU_{CFLAG:ARG:(ARG:1)}
KIRYOKU_CAL = 100 - RESULT

$INPUT_LOOP
VARSET LOCAL
TRYCALLFORM CLOTH_CUSTOMIZE_{CFLAG:ARG:(ARG:1)}
SLOTMAX = RESULT
SLOTUSED = 0
FOR LOCAL, 600, 700
	SIF EQUIP:ARG:LOCAL > 0
		SLOTUSED ++
NEXT
PRINTL 
PRINTL カスタマイズ項目を選んでください
DRAWLINE
PRINTFORML %ITEMNAME:(CFLAG:ARG:(ARG:1)), 30,LEFT%
;衣装の性能
PRINT 【 基本 】
SIF CFLAG:ARG:(ARG:1) == 200
		PRINT 下着へのダメージ軽減　
SIF CFLAG:ARG:(ARG:1) == 299
		PRINT 避妊効果　
TRYCCALLFORM CLOTH_NO_INNER_{CFLAG:ARG:(ARG:1)}
	SIF RESULT > 0
		PRINT インナー兼用　
CATCH
ENDCATCH
PRINT スロット数：
REPEAT SLOTUSED
	PRINT ●
REND
REPEAT SLOTMAX - SLOTUSED
	PRINT 〇
REND
PRINTL 
VARSET LOCALS
PRINT 【 補正 】
;攻撃
TRYCCALLFORM CLOTH_HOSEI_KOUGEKI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "KOUGEKI"
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"攻撃%LOCALS%倍　"
ENDIF
;防御
TRYCCALLFORM CLOTH_HOSEI_BOUGYO_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "BOUGYO"
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"防御%LOCALS%倍　"
ENDIF
;敏捷
TRYCCALLFORM CLOTH_HOSEI_BINSYOU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "BINSYOU"
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"敏捷%LOCALS%倍　"
ENDIF
;知性
TRYCCALLFORM CLOTH_HOSEI_CHISEI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "CHISEI"
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"知性%LOCALS%倍　"
ENDIF
;体力
TRYCCALLFORM CLOTH_HOSEI_TAIRYOKU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "TAIRYOKU"
IF (RESULT + TAIRYOKU_CAL) != 100
	RESULT += 10
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の体力の減少量%LOCALS%倍　"
ENDIF
;気力
TRYCCALLFORM CLOTH_HOSEI_KIRYOKU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "KIRYOKU"
IF (RESULT + KIRYOKU_CAL) != 100
	RESULT += 10
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の気力の減少量%LOCALS%倍　"
ENDIF
;クリティカル率
TRYCCALLFORM CLOTH_HOSEI_CRITICAL_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "CRITICAL"
IF RESULT != 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"クリティカル補正 +%LOCALS%％　"
ENDIF
;ＥＸブースト
TRYCCALLFORM CLOTH_HOSEI_EXBOOST_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "EXBOOST"
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"EXゲージ増幅　"
ENDIF
;空中性能強化
TRYCCALLFORM CLOTH_HOSEI_AIRPLUS_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "AIRPLUS"
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"空中性能強化　"
ENDIF
;粘液軽減
TRYCCALLFORM CLOTH_HOSEI_LIQUID_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "LIQUID"
IF RESULT <= 70
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（大）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（中）　"
ELSEIF RESULT <= 90
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（小）　"
ENDIF
;波動軽減
TRYCCALLFORM CLOTH_HOSEI_WAVE_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "WAVE"
IF RESULT <= 70
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（大）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（中）　"
ELSEIF RESULT <= 90
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（小）　"
ENDIF

PRINTFORML %LOCALS:1%
IF LOCALS:2 != ""
	PRINT 　　　　　
	PRINTFORML %LOCALS:2%
ENDIF
PRINT 【耐久力】
TRYCALLFORM CLOTH_HP_{CFLAG:ARG:(ARG:1)}
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "HP"
IF RESULT > 0
	PRINTFORM {RESULT}
ELSE
	PRINT ─
ENDIF
PRINTL 
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 36
PRINTL 【汎用】
FOR LOCAL, 600, 660
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
		SIF EQUIP:ARG:LOCAL > 0
			SETCOLOR 120,255,0
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		RESETCOLOR
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
LOCAL:1 = 0
PRINTL 
PRINTL 
PRINTL 【羽織】
FOR LOCAL, 660, 670
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
		SIF EQUIP:ARG:LOCAL > 0
			SETCOLOR 120,255,0
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		RESETCOLOR
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
LOCAL:1 = 0
PRINTL 
PRINTL 
PRINTL 【胸部】
FOR LOCAL, 670, 680
	IF ITEM:LOCAL == 1
		IF (LOCAL == 672 && TALENT:ARG:貧乳 > 0) || (LOCAL == 673 && TALENT:ARG:巨乳 > 0)
			LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
			SETCOLOR 96,96,96
			LOCAL:LOCAL = -1
		ELSE
			LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
			SIF EQUIP:ARG:LOCAL > 0
				SETCOLOR 120,255,0
		ENDIF
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		RESETCOLOR
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
LOCAL:1 = 0
PRINTL 
PRINTL 
PRINTL 【腕部】
FOR LOCAL, 680, 690
	IF ITEM:LOCAL == 1
		LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
		SIF EQUIP:ARG:LOCAL > 0
			SETCOLOR 120,255,0
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		RESETCOLOR
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
LOCAL:1 = 0
PRINTL 
PRINTL 
PRINTL 【脚部】
FOR LOCAL, 690, 700
	IF ITEM:LOCAL == 1
		IF CFLAG:ARG:(ARG:1) == 200 || CFLAG:ARG:(ARG:1) == 299
			LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
			SETCOLOR 96,96,96
			LOCAL:LOCAL = -1
		ELSE
			LOCALS:0 = [{LOCAL}]%ITEMNAME:LOCAL%
			SIF EQUIP:ARG:LOCAL > 0
				SETCOLOR 120,255,0
		ENDIF
		PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
		RESETCOLOR
		LOCAL:1 += 1
		IF LOCAL:1 == 3
			LOCAL:1 = 0
			PRINTL 
		ENDIF
	ENDIF
NEXT
PRINTL 
PRINTL 
PRINTL [999]決定
PRINTL 
INPUT
IF RESULT == 999
	TARGET = KEEPTARGET
ELSEIF RESULT >= 600 && RESULT <= 700 && EQUIP:ARG:RESULT > 0 && ITEM:RESULT > 0
	SIF LOCAL:RESULT == 0
		EQUIP:ARG:RESULT = 0
	CLEARLINE LINECOUNT - LINE
	GOTO INPUT_LOOP
ELSEIF RESULT >= 600 && RESULT <= 700 && EQUIP:ARG:RESULT == 0 && ITEM:RESULT > 0
	IF LOCAL:RESULT == 0
		IF RESULT >= 660 && RESULT < 670
			FOR LOCAL, 660, 670
				IF EQUIP:ARG:LOCAL > 0
					EQUIP:ARG:LOCAL = 0
					SLOTUSED --
				ENDIF
			NEXT
		ELSEIF RESULT >= 670 && RESULT < 680
			FOR LOCAL, 670, 680
				IF EQUIP:ARG:LOCAL > 0
					EQUIP:ARG:LOCAL = 0
					SLOTUSED --
				ENDIF
			NEXT
		ELSEIF RESULT >= 680 && RESULT < 690
			FOR LOCAL, 680, 690
				IF EQUIP:ARG:LOCAL > 0
					EQUIP:ARG:LOCAL = 0
					SLOTUSED --
				ENDIF
			NEXT
		ELSEIF RESULT >= 690 && RESULT < 700
			FOR LOCAL, 690, 700
				IF EQUIP:ARG:LOCAL > 0
					EQUIP:ARG:LOCAL = 0
					SLOTUSED --
				ENDIF
			NEXT
		ENDIF
		SIF SLOTMAX - SLOTUSED > 0
			EQUIP:ARG:RESULT = 1
	ENDIF
	CLEARLINE LINECOUNT - LINE
	CALL SHORTLINE
	PRINTFORML %ITEMNAME:(RESULT)%
	CALLFORM CLOTH_DESCRIPTION_{RESULT}
	CALL SHORTLINE
	GOTO INPUT_LOOP
ELSE
	CLEARLINE LINECOUNT - LINE
	GOTO INPUT_LOOP
ENDIF
RETURN 0

;------------------------------------------------------------------------------------------------------------------------------------------------------------
;インナーのカスタマイズ
@CLOTH_CUSTOMIZE_INNER, ARG, ARG:1
#DIM KEEPTARGET
#DIM LINE
#DIM STR_LENGTH
#DIM TAIRYOKU_CAL
#DIM KIRYOKU_CAL
#DIM ID
ID = CFLAG:ARG:(ARG:1) - 100
LINE = LINECOUNT
STR_LENGTH = 35
KEEPTARGET = TARGET
TARGET = ARG
;体力気力の補正値を読み込み
TAIRYOKU_CAL = 0
KIRYOKU_CAL = 0

$MASTER_LOOP
VARSET LOCAL
PRINTL 
PRINT カスタマイズ項目を選んでください
PRINTL 
DRAWLINE
PRINTFORML %ITEMNAME:(CFLAG:ARG:(ARG:1)), 30,LEFT%
;衣装の性能
PRINT 【 基本 】
VARSET LOCALS
;攻撃
TRYCCALLFORM CLOTH_HOSEI_KOUGEKI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"攻撃%LOCALS%倍　"
ENDIF
;防御
TRYCCALLFORM CLOTH_HOSEI_BOUGYO_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"防御%LOCALS%倍　"
ENDIF
;敏捷
TRYCCALLFORM CLOTH_HOSEI_BINSYOU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"敏捷%LOCALS%倍　"
ENDIF
;知性
TRYCCALLFORM CLOTH_HOSEI_CHISEI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"知性%LOCALS%倍　"
ENDIF
;体力
TRYCCALLFORM CLOTH_HOSEI_TAIRYOKU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF (RESULT + TAIRYOKU_CAL) != 100
	RESULT += TAIRYOKU_CAL
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の体力の減少量%LOCALS%倍　"
ENDIF
;気力
TRYCCALLFORM CLOTH_HOSEI_KIRYOKU_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF (RESULT + KIRYOKU_CAL) != 100
	RESULT += KIRYOKU_CAL
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の気力の減少量%LOCALS%倍　"
ENDIF
;性耐性
TRYCCALLFORM CLOTH_HOSEI_SEITAISEI_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
;インナーの性耐性の基準値は0.95？
IF (RESULT) != 95
	LOCAL = RESULT + 5
	IF LOCAL % 10 == 0
		LOCALS = {LOCAL / 100}.{(LOCAL % 100) / 10}
	ELSE
		LOCALS = {LOCAL / 100}.{LOCAL % 100 / 10}{LOCAL % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"戦闘中の性耐性の減少量%LOCALS%倍　"
ENDIF

;油断度
TRYCCALLFORM CLOTH_HOSEI_YUDAN_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
RESULT += 1 * ((FIGURE_SPLIT(EQUIP:ARG:(CFLAG:ARG:(ARG:1) - 100),15) - FIGURE_SPLIT(EQUIP:ARG:(CFLAG:ARG:(ARG:1) - 100),14)))
IF (RESULT) != 100
	IF RESULT % 10 == 0
		LOCALS = {RESULT / 100}.{(RESULT % 100) / 10}
	ELSE
		LOCALS = {RESULT / 100}.{RESULT % 100 / 10}{RESULT % 10}
	ENDIF
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"触手の油断度の上昇量%LOCALS%倍　"
ENDIF

;クリティカル率
TRYCCALLFORM CLOTH_HOSEI_CRITICAL_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT != 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"クリティカル補正 +%LOCALS%％　"
ENDIF
;回避率
TRYCCALLFORM CLOTH_HOSEI_AVOID_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT != 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"回避率補正	+%LOCALS%％　"
ENDIF
;ＥＸブースト
TRYCCALLFORM CLOTH_HOSEI_EXBOOST_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"EXゲージ増幅　"
ENDIF
;空中性能強化
TRYCCALLFORM CLOTH_HOSEI_AIRPLUS_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"空中性能強化　"
ENDIF
;粘液軽減
TRYCCALLFORM CLOTH_HOSEI_LIQUID_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT <= 70
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（大）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（中）　"
ELSEIF RESULT <= 90
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"粘液ダメージ軽減（小）　"
ENDIF
;波動軽減
TRYCCALLFORM CLOTH_HOSEI_WAVE_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT <= 70
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（大）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（中）　"
ELSEIF RESULT <= 90
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"邪気ダメージ軽減（小）　"
ENDIF

;Ｃ自動増加耐性
TRYCCALLFORM CLOTH_HOSEI_ANTICUP_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"快Ｃ自動増加防止　"
ENDIF

;露出軽減
TRYCCALLFORM CLOTH_HOSEI_SHYNESS_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 100
ENDCATCH
IF RESULT <= 20
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"露出軽減（大）　"
ELSEIF RESULT <= 60
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"露出軽減（中）　"
ELSEIF RESULT <= 80
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"露出軽減（小）　"
ENDIF

;支援回復効果アップ
TRYCCALLFORM CLOTH_HOSEI_HEALUP_{CFLAG:ARG:(ARG:1)}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT > 0
	LOCALS = {RESULT}
	STRLENS LOCALS:1
	LOCALS:(1 + (RESULT > STR_LENGTH)) += @"支援時の回復効果増幅　"
ENDIF

PRINTFORML %LOCALS:1%
IF LOCALS:2 != ""
	PRINT 　　　　　
	PRINTFORML %LOCALS:2%
ENDIF
PRINT 【 補正 】
;油断度
LOCAL = FIGURE_SPLIT(EQUIP:ARG:ID,15) - FIGURE_SPLIT(EQUIP:ARG:ID,14)
SIF LOCAL > 0
	PRINTFORM 触手の油断度+{LOCAL}％　
SIF LOCAL < 0
	PRINTFORM 触手の油断度{LOCAL}％　

;挿入抵抗
LOCAL = FIGURE_SPLIT(EQUIP:ARG:ID,13) - FIGURE_SPLIT(EQUIP:ARG:ID,12)
IF LOCAL > 0
	PRINTFORM 挿入抵抗+{5*LOCAL}％　
ELSEIF LOCAL < 0
	PRINTFORM 挿入抵抗{5*LOCAL}％　
ENDIF
PRINTL 
PRINT 【耐久力】
TRYCALLFORM CLOTH_HP_{CFLAG:ARG:(ARG:1)}
CALL CLOTH_CUSTOMIZE_COMMON_CAL, RESULT, "HP"
IF RESULT > 0
	PRINTFORM {RESULT}
ELSE
	PRINT ─
ENDIF
PRINTL 
DRAWLINE

TRYCALLFORM CLOTH_CUSTOMIZE_OPTION_{CFLAG:ARG:(ARG:1)},ARG
IF RESULT == 99
	CFLAG:ARG:1 = 0
	RETURN
ELSEIF RESULT == -1
	CLEARLINE LINECOUNT - LINE
	GOTO MASTER_LOOP
ENDIF

